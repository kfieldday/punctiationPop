<!DOCTYPE html>
	<head>
		<title>Punctiation POP</title>
		<style>
			html, body, div, span{
				-webkit-user-select: none; /* Safari */
				-ms-user-select: none; /* IE 10 and IE 11 */
				user-select: none; /* Standard syntax */
			}
			.button {
				background-color: transparent; 
				transition-duration: 0.4s;
				display: inline-block;
				border-radius: 50%;
				padding: 25px 50px;
				text-shadow: 0px 0px;
			}
			.Multi {
				background-color: transparent; 
				transition-duration: 0.4s;
				display: inline-block;
				border-radius: 50%;
				padding: 25px 50px;
				text-shadow: 0px 0px 20px red;
			}
			.button:hover{
				//background-color: grey;
				cursor: pointer;
			}
			#enabled {
				
				position: absolute;
				font-size: 72px;
			}
			#disabled{
				padding: 0px;
				background-color: transparent;
			}
			#disabled:hover{
				background-color: transparent;
				cursor: default;
			}
			#playarea {
				display: inline-block;
				margin: 5%;
				border-color: red;
				border-size: 1px;
				width: 90%;
				height: 80%;
				max-height: 100%;
				border-style:solid;
				position: absolute;
				
			}
			#playarea p {
				display: grid;
				padding: 0px 0px 0px 10px;
			}
			#key {
				display:inline-block;
				top: 10%;
				left: 90%;
				position: absolute;
				font-size: 20px;
			}
		</style>
	</head>
	<body>
		<div id="playarea">
			<p><b>Time Left:</b><p id="Timer"></p></p>
			<p><b>Score:</b></p>
			<p id="score">You can do it!</p>
		</div>
		<div id="key">
			<p style="color:black;">. = 10pts</p>
			<p style="color:green;">? = 25pts</p>
			<p style="color:blue;">. = 50pts</p>
			<p style="color:red;">. = 100pts</p>
			<p style="color:red;">, = x2</p>
		</div>
		<script type="application/javascript">
			//CODED BY KENNY SCOFIELD
			//VERSION: 1.0.0 - alpha
			const Puncs = ['.', '?', '!','?!'];
			var span=[];
			var winWidth;
			var winHeight;
			var timer;
			var randomTop;
			var randomLeft;
			var score = 0;
			var scaler = 1;
			var winscale = .15;
			var maxPuncs = 15;
			var commaTime = [getRandomNumber(10,20),getRandomNumber(10,20)];
			
			
			startTimer(30, document.getElementById("Timer")); //Start Timer
			
			function clampNumber(num, a, b){ //clamp(n, min, max)
				return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));
			} 
			
			async function Movebutton(e){ //UPDATE BUTTON LOCATION
				var fontS = 96;
				span[e].style.fontSize = fontS + "px";
				//console.log(e);
				var i = getRandomNumber(0,100);
				switch (true){
					case (i<40): //period
						span[e].style.color = "black";
						span[e].style.padding = "0px 50px 30px 50px";
						i=0;
						break;
					case (i<70): //question
						span[e].style.color = "green";
						i=1;
						break;
					case (i<90): //exclamation
						span[e].style.color = "blue";
						i=2;
						break;
					case (i<100): //interrobang
						span[e].style.color = "red";
						i=3;
						break;
				}
				
				span[e].innerHTML = Puncs[i];
				span[e].id = "enabled";
				winWidth = window.innerWidth - span[e].offsetWidth-(window.innerWidth*winscale);
				winHeight = window.innerHeight - span[e].offsetHeight-(window.innerHeight*winscale);
				randomTop = getRandomNumber((window.innerHeight*winscale), winHeight);
				randomLeft = getRandomNumber((window.innerWidth*winscale), winWidth);
				span[e].style.top = randomTop + "px";
				span[e].style.left = randomLeft + "px";
				
				/*setInterval(function(){
					fontS = clampNumber(fontS - 1, 36, 96);
					
					span[e].style.fontSize = fontS + "px";
					
				},100);*/
			}

			function getRandomNumber(min, max) {
				return Math.floor(Math.random() * (max - min)+min);
			}
			
			async function UpdateScoreBoard(button){ //SCOREBOARD
				
				switch (span[button].innerHTML){
					case ".": //period
						score = score + 10*scaler;
						break;
					case "?": //question
						score = score + 25*scaler;
						break;
					case "!": //exclamation
						score = score + 50*scaler;
						break;
					case "?!": //interrobang
						score = score + 100*scaler;
						break;
				}
				span[button].innerHTML = " ";
				span[button].id = "disabled";
				document.getElementById("score").innerHTML = score;
				setTimeout(function(){Movebutton(button);}, 3000);
			}
			
			function Endgame(){  //END GAME
				alert("Game Over! Your score is: "+score +"\n Refresh page to play again!");
				//clearInterval();
			}
			function startTimer(duration, display) {
				var timer = duration, minutes, seconds;
				setInterval(function () {
					minutes = parseInt(timer / 60, 10);
					seconds = parseInt(timer % 60, 10);

					minutes = minutes < 10 ? "0" + minutes : minutes;
					seconds = seconds < 10 ? "0" + seconds : seconds;

					display.textContent = minutes + ":" + seconds;
					if (timer == commaTime[0] || timer == commaTime[1]){
						spawnComma();
					}
					if (--timer < 0) {
						Endgame();
					}
				}, 1000);
			}
			function spawnComma(){  //COMMA MULTIPLYER
				var i = getRandomNumber(0,100);
				comma = document.createElement("span")
				document.body.appendChild(comma);
				comma.classList.add("button");
				comma.style.color = "red";
				comma.style.padding = "0px 50px 30px 50px";
				comma.innerHTML = ","
				comma.id = "enabled";
				winWidth = window.innerWidth - comma.offsetWidth-(window.innerWidth*winscale);
				winHeight = window.innerHeight - comma.offsetHeight-(window.innerHeight*winscale);
				randomTop = getRandomNumber((window.innerHeight*winscale), winHeight);
				randomLeft = getRandomNumber((window.innerWidth*winscale), winWidth);
				comma.style.top = randomTop + "px";
				comma.style.left = randomLeft + "px";
				comma.addEventListener("click", function(){
					comma.remove();
					scaler = 2;
					
					
					//console.log(buttons);
					for(let i=0;i<maxPuncs;i++){
						span[i].classList.remove("button");
						span[i].classList.add("Multi");
					}
					
					setTimeout(function () {
						scaler = 1;
						for(i=0;i<maxPuncs;i++){
							span[i].classList.remove("Multi");
							span[i].classList.add("button");
							
						}
					},5000);
				});
			}
			for(let butcount=0;butcount<maxPuncs;butcount++){ //create buttons
				span.push(document.createElement("span"));
				document.body.appendChild(span[butcount]);
				span[butcount].classList.add("button");
				
				var i = getRandomNumber(0,4);
				switch (i){
					case 0:
						span[butcount].style.color = "black";
						span[butcount].style.padding = "0px 50px 30px 50px";
						break;
					case 1:
						span[butcount].style.color = "green";
						break;
					case 2:
						span[butcount].style.color = "blue";
						break;
					case 3:
						span[butcount].style.color = "red";
						break;
				}
				
				span[butcount].innerHTML = Puncs[i];
				span[butcount].id = "enabled";
				winWidth = window.innerWidth - span[butcount].offsetWidth-(window.innerWidth*winscale);
				winHeight = window.innerHeight - span[butcount].offsetHeight-(window.innerHeight*winscale);
				randomTop = getRandomNumber((window.innerHeight*winscale), winHeight);
				randomLeft = getRandomNumber((window.innerWidth*winscale), winWidth);
				span[butcount].style.top = randomTop + "px";
				span[butcount].style.left = randomLeft + "px";
				
				
			}
			span.forEach((item, index) => {
				
				item.addEventListener("click", function(){UpdateScoreBoard(index);});
				
				});
			
			
			

		</script>
	</body>
</html>